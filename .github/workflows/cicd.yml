name: CICD

on:
  push:
    branches: [deploy-ec2]

jobs:
  deploy:
    runs-on:
      - aws-ec2
    steps:
      - name: Pull Image from docker hub
        run: docker pull tranminhman040702/personal-project_backend:latest
      - name: Delete old container
        run: docker rm -f personal-project_backend
      - name: Run docker container
        run: docker run -d -p 8081:8081 --name backend-shopmt tranminhman040702/personal-project_backend:latest